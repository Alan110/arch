!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.arch=e()}(this,function(){"use strict";function t(t,e){this.arr=t,this.notify=e}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();console.log("aaa");var i={type:function(t){return Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===this.type(t)},isFunction:function(t){return"[object Function]"===this.type(t)},isTypeEq:function(t,e){return"[object "+t+"]"===Object.prototype.toString.call(e).toLocaleLowerCase()},extend:function(t){function e(e,n,r,i){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t,n,r,i){if("object"!==("undefined"==typeof t?"undefined":e(t))||"object"!==("undefined"==typeof n?"undefined":e(n)))return t;if(r){for(var o in n)if(n.hasOwnProperty(o))if("object"===e(n[o]))if(i&&Array.isArray(n[o])&&Array.isArray(t[o])){var s=extend([],t[o],r),c=extend([],n[o],r);t[o]=s.concat(c)}else t[o]=arguments.callee({},n[o],r);else t[o]=n[o]}else for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a]);return t})},o=Array.prototype;t.prototype=Object.create(o),t.prototype.constructor=t,["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e,n){t.prototype[e]=function(){var t=o.slice.call(arguments);o[e].apply(this.arr,t);var n=void 0;switch(e){case"push":n=t;break;case"unshift":n=t;break;case"splice":n=t.slice(2)}this.notify(this.arr,n)}});var s=function(){function e(t){n(this,e),this.data=t.data||{},this.watchrCallbacks=t.watch||{},this.bindWatch(this,this.data,this.watchrCallbacks),warn("我靠你妹 !!!")}return r(e,[{key:"bindWatch",value:function(e,n,r){var o=this;for(var s in n)i.isObject(n[s])?(e[s]={},this.bindWatch(e[s],n[s],r[s])):Array.isArray(n[s])?this[s]=new t(n[s],function(t){return function(e,n){var i=r[t];i&&i.call(o,e,n)}}(s)):Object.defineProperty(e,s,{get:function(t){return function(){return n[t]}}(s),set:function(t){return function(e){var i=r[t];i&&i.call(o,n[t],e),n[t]=e}}(s)})}}]),e}(),c=function(){function t(){n(this,t)}return r(t,[{key:"_indexOfListener",value:function(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}},{key:"on",value:function(t,n){var r=this._getEventListenersAsObject(t),i="object"===("undefined"==typeof n?"undefined":e(n));for(var o in r)r.hasOwnProperty(o)&&this._indexOfListener(r[o],n)===-1&&r[o].push(i?n:{listener:n,once:!1});return this}},{key:"one",value:function(t,e){return this.on(t,{listener:e,once:!0})}},{key:"off",value:function(t,e){var n=this._getEventListenersAsObject(t);for(var r in n)if(n.hasOwnProperty(r)){var i=this._indexOfListener(n[r],e);i!==-1&&n[r].splice(i,1)}return this}},{key:"trigger",value:function(t,e){var n,r=this._getEventListenersAsObject(t);for(var i in r)if(r.hasOwnProperty(i))for(var o=r[i].slice(0),s=o.length;s--;){var c=o[s];c.once===!0&&this.off(t,c.listener),n=c.listener.call(this,e||[])}return this}},{key:"_getEventListenersAsObject",value:function(t){var e,n=this._getEventListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n}},{key:"_getEventListeners",value:function(t){var e=this._getEvents();return e[t]||(e[t]=[])}},{key:"_getEvents",value:function(){return this._events||(this._events={})}}]),t}(),a=function(t){return new s(t)},u=a.eventCenter=new c;["on","one","trigger","off"].forEach(function(t,e){a[t]=function(){u[t].apply(u,arguments)}});var f=i.extend({name:"123",arr:[1,2]},{arr:[3,4,5]},!0,!0);return console.log(f),a});
